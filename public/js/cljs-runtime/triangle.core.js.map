{"version":3,"sources":["triangle/core.cljs"],"mappings":"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","names":["triangle.core/stage","reagent.core/adapt-react-class","js/module$node_modules$react_konva$lib$ReactKonva.Stage","triangle.core/layer","js/module$node_modules$react_konva$lib$ReactKonva.Layer","triangle.core/rect","js/module$node_modules$react_konva$lib$ReactKonva.Rect","triangle.core/line","js/module$node_modules$react_konva$lib$ReactKonva.Line","triangle.core/circle","js/module$node_modules$react_konva$lib$ReactKonva.Circle","triangle.core/group","js/module$node_modules$react_konva$lib$ReactKonva.Group","triangle.core/text","js/module$node_modules$react_konva$lib$ReactKonva.Text","triangle.core/window-width","js/window","triangle.core/window-height","triangle.core/init-vertex","p1__16557#","cljs.core.map","triangle.calc.add","triangle.core/state-vertex","reagent.core.atom","cljs.core/zipmap","triangle.core/point-size","triangle.core/center-color-table","triangle.core/state-center","cljs.core/keys","cljs.core.repeat","triangle.core/get-xy","e","t","triangle.core/vertex","k","vec__16558","cljs.core.nth","x","y","G__16561","cljs.core/deref","cljs.core.swap_BANG_","cljs.core/assoc","triangle.core/triangle","map__16562","cljs.core/--destructure-map","cljs.core.get","a","b","c","cljs.core/flatten","triangle.core/select-center","style","cljs.core.into","iter__5523__auto__","s__16564","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5521__auto__","size__5522__auto__","cljs.core/count","b__16566","cljs.core/chunk-buffer","i__16565","vec__16567","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__16563","cljs.core/chunk-rest","vec__16570","cljs.core/first","cljs.core/cons","cljs.core/rest","v","cljs.core/name","triangle.core/point","color","triangle.core/show?","map__16573","and__5043__auto__","triangle.calc/triangle?","G__16574","triangle.core/circumcenter","map__16575","map__16576","vec__16577","p","r","triangle.calc/circumcenter-data","triangle.core/incenter","map__16580","map__16581","vec__16582","triangle.calc/incenter-data","triangle.core/centroid","map__16585","vec__16586","triangle.calc.mul","var_args","args__5775__auto__","len__5769__auto__","i__5770__auto__","argseq__5776__auto__","cljs.core/IndexedSeq","triangle.core/ray","p__16592","map__16593","seq16589","G__16590","cljs.core/next","G__16591","self__5754__auto__","start","dir","half?","start1","triangle.calc.sub","end","triangle.core/orthocenter","map__16594","map__16595","vec__16596","rays","triangle.calc/orthocenter-data","s__16600","b__16602","i__16601","map__16603","iter__16599","map__16604","triangle.core.ray","triangle.core/canvas","triangle.core/main","js/triangle","js/triangle.core","js/triangle.core.root","triangle.core/root","js/module$node_modules$react_dom$client.createRoot","js/document.getElementById","triangle.core/render-main","reagent.core.create_class","triangle.core/init","reagent.core.as_element","cljs.core/chunk-first"],"sourcesContent":["(ns triangle.core\n  (:require  [reagent.core :as r]\n             [reagent.dom :as rdom]\n             [medley.core :as med]\n             [goog.string :refer [format]]\n             [\"react-dom/client\" :refer [createRoot]]\n             [\"react-konva\" :as konva :refer [Stage Layer Rect Line Circle Group Text]]\n             [triangle.calc :as calc]))\n\n(def stage (r/adapt-react-class Stage))\n\n(def layer (r/adapt-react-class Layer))\n\n(def rect (r/adapt-react-class Rect))\n\n(def line (r/adapt-react-class Line))\n\n(def circle (r/adapt-react-class Circle))\n\n(def group (r/adapt-react-class Group))\n\n(def text (r/adapt-react-class Text))\n\n(defn- window-width [] (. js/window -innerWidth))\n\n(defn- window-height [] (. js/window -innerHeight))\n\n(def init-vertex (map #(calc/add % [200 200]) [[0 0] [200 0] [100 -100]]))\n\n(def state-vertex (r/atom (zipmap [:a :b :c] init-vertex)))\n\n(def point-size 7)\n\n(def center-color-table {:circumcenter \"orange\"\n                         :incenter \"blue\"\n                         :orthocenter \"gray\"\n                         :centroid \"red\"})\n\n(def state-center (r/atom (zipmap (keys center-color-table) (repeat false))))\n\n(defn get-xy [e]\n  (let [t (. e -target)]\n    [(. t x) (. t y)]))\n\n(defn vertex [k]\n  (let [[x y] (k @state-vertex)]\n    [circle {:x x :y y :stroke \"black\" :radius point-size\n             :on-mouse-enter (fn [e] (.. e -target (fill \"black\")))\n             :on-mouse-out (fn [e] (.. e -target (fill nil)))\n             :draggable true\n             :on-drag-move (fn [e]\n                             (swap! state-vertex assoc k (get-xy e)))}]))\n\n(defn triangle []\n  (let  [{:keys [a b c]} @state-vertex]\n    [group\n     {:draggable true}\n     [line {:points (flatten [a b c])\n            :closed true\n            :stroke \"black\"}]\n     [vertex :a]\n     [vertex :b]\n     [vertex :c]]))\n\n(defn select-center []\n  (let [style (fn [k] {:text-decoration \"underline\"\n                       :text-decoration-thickness 3\n                       :text-decoration-color (k center-color-table)})]\n    [:fieldset\n     {:style {:display \"flex\"\n              :height 120}}\n     [:legend \"Select\"]\n     [:table\n      (into [:tbody]\n            (for [[k v] center-color-table]\n              [:tr [:td {:style (style k) } (name k)]\n               [:td [:input {:type \"checkbox\"\n                             :on-change (fn [e]\n                                          (let [t (.. e -target -checked)]\n                                            (swap! state-center assoc k t)))}]]]))]]))\n\n(defn point [x y color]\n  [circle {:x x :y y :fill color :radius point-size}])\n\n(defn show?\n  \"Should we display this center? It also checks\n  if the three points makes a triangle and returns false\n  if they don't.\"\n  [k]\n  (let [{:keys [a b c]} @state-vertex]\n    (and (calc/triangle? a b c)\n         (k @state-center))))\n\n(defn circumcenter []\n  (when (show? :circumcenter )\n    (let [{:keys [a b c]} @state-vertex\n          {:keys [p r]} (calc/circumcenter-data a b c)\n          [x y] p\n          color (:circumcenter center-color-table)]\n      [group\n       [point x y color]\n       [circle {:x x :y y :radius r :stroke color}]])))\n\n(defn incenter []\n  (when (show? :incenter)\n    (let [{:keys [a b c]} @state-vertex\n          {:keys [p r]} (calc/incenter-data a b c)\n          [x y] p\n          color (:incenter center-color-table)]\n      [group\n       [point x y color]\n       [circle {:x x :y y :radius r :stroke color}]])))\n\n(defn centroid []\n  (when (show? :centroid)\n    (let [{:keys [a b c]} @state-vertex\n          [x y] (calc/mul (/ 1 3) (calc/add a b c))\n          color (:centroid center-color-table)]\n      [point x y color])))\n\n(defn ray [start dir &{:keys [color half?]\n                       :or {color \"black\"\n                            half? false}}]\n  (let [r (+ (window-width) (window-height))\n        v (calc/mul r dir)\n        start1 (if half? start (calc/sub start v))\n        end (calc/add start v)]\n    [line {:points (flatten [start1 end])\n           :stroke color\n           :dash [5 5]}]))\n\n(defn orthocenter []\n  (when (show? :orthocenter)\n    (let [{:keys [a b c]} @state-vertex\n          {:keys [p rays]} (calc/orthocenter-data a b c)\n          [x y] p\n          color (:orthocenter center-color-table)]\n      (into [group [point x y color]]\n            (for [{:keys [start dir]} rays] (ray start dir :color color))))))\n\n(defn canvas []\n  [stage {:width (window-width)\n          :height (window-height)}\n   [layer\n    ;; the latter shapes are displayed in front of the former ones.\n    [circumcenter]\n    [incenter]\n    [centroid]\n    [orthocenter]\n    [triangle]\n    ]])\n\n(defn main []\n  [:div\n   [:h2 \"The four triangle centers\"]\n   [:div {:style {:display \"flex\"\n                  :width (window-width)\n                  :height (window-height)\n                  :flex-direction \"row\"}}\n    [select-center]\n    [canvas]]])\n\n;;;;;;;;;;;;;;;;;\n;; render main ;;\n;;;;;;;;;;;;;;;;;\n\n(defonce root (createRoot (js/document.getElementById \"root\")))\n\n(defn render-main []\n  (r/create-class\n   {:component-name \"my-main\"\n    :reagent-render main}))\n\n(defn init []  (.render root (r/as-element [render-main])))\n\n(init)\n"]}